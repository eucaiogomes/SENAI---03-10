<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Cancelar Reserva</title>
    <!-- Bootstrap CSS para estilizar a página -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-4">
        <h1>Cancelar Reserva</h1>
        
        <!-- Mostra mensagem de erro se houver -->
        <div th:if="${erro}" class="alert alert-danger">
            <span th:text="${erro}"></span>
        </div>
        
        <!-- Card que mostra os dados da reserva -->
        <div class="card mb-3">
            <div class="card-body">
                <!-- Mostra o nome do colaborador -->
                <p><strong>Colaborador:</strong> <span th:text="${reserva.nomeColaborador}"></span></p>
                <!-- Mostra a descrição do recurso -->
                <p><strong>Recurso:</strong> <span th:text="${reserva.descricaoRecurso}"></span></p>
                <!-- 
                    Formata a data para mostrar no formato brasileiro (dia/mês/ano)
                    #temporals.format = função do Thymeleaf para formatar datas
                    reserva.data = a data que vem do banco
                    'dd/MM/yyyy' = formato desejado: dia/mês/ano (exemplo: 25/12/2024)
                -->
                <p><strong>Data:</strong> <span th:text="${#temporals.format(reserva.data, 'dd/MM/yyyy')}"></span></p>
                <!-- 
                    Formata as horas para mostrar no formato (hora:minuto)
                    reserva.horaInicial = a hora inicial que vem do banco
                    reserva.horaFinal = a hora final que vem do banco
                    'HH:mm' = formato desejado: hora:minuto (exemplo: 14:30)
                -->
                <p><strong>Horário:</strong> <span th:text="${#temporals.format(reserva.horaInicial, 'HH:mm')}"></span> 
                   até <span th:text="${#temporals.format(reserva.horaFinal, 'HH:mm')}"></span></p>
            </div>
        </div>
        
        <!-- Formulário para cancelar a reserva -->
        <!-- th:action="@{/reservacancelar/{id}(id=${reserva.id})}" = quando enviar, vai para a rota /reservacancelar/1 (onde 1 é o ID) -->
        <!-- method="post" = envia os dados quando clicar em Cancelar Reserva -->
        <form th:action="@{/reservacancelar/{id}(id=${reserva.id})}" method="post">
            <!-- Campo de observação (motivo do cancelamento) -->
            <div class="mb-3">
                <label class="form-label">Observação (motivo do cancelamento) *</label>
                <!-- name="observacao" = nome do campo que será enviado para o controller -->
                <textarea class="form-control" name="observacao" rows="3" required></textarea>
            </div>
            
            <!-- Botão para cancelar a reserva -->
            <button type="submit" class="btn btn-danger">Cancelar Reserva</button>
            <!-- Botão para voltar para a lista -->
            <a href="/reservalista" class="btn btn-secondary">Voltar</a>
        </form>
    </div>
</body>
</html>
